/* =========================================================
   LAYERS
   ========================================================= */
@layer reset, tokens, base, components, utilities;

/* =========================================================
   RESET
   ========================================================= */
@layer reset {
  *, *::before, *::after { box-sizing: border-box; }
  * { margin: 0; }
  html:focus-within { scroll-behavior: smooth; }
  img, svg { display: block; max-width: 100%; height: auto; }
  a { color: inherit; text-decoration: none; }
  button { font: inherit; color: inherit; background: none; border: 0; cursor: pointer; }
}

/* =========================================================
   TOKENS (Neon Cyber)
   ========================================================= */
@layer tokens {
  :root {
    /* Dark base + linear accent gradients */
    --bg-0: oklch(12% 0.05 260);  /* deep charcoal / blue */
    --bg-1: oklch(16% 0.06 262);
    --ink:  oklch(96% 0.01 260);

    /* Neon accents */
    --cyan:  oklch(80% 0.2 210);
    --vio:   oklch(78% 0.22 300);
    --mag:   oklch(75% 0.21 330);

    /* Linear gradient (your pick) */
    --grad-1: linear-gradient(120deg, color-mix(in oklch, var(--vio) 60%, black) 0%, color-mix(in oklch, var(--cyan) 65%, black) 50%, color-mix(in oklch, var(--mag) 55%, black) 100%);
    --grad-2: linear-gradient(90deg, color-mix(in oklch, var(--cyan) 45%, transparent), color-mix(in oklch, var(--vio) 45%, transparent));

    /* Radii / shadows / sizes */
    --r-lg: 22px;
    --r-md: 16px;
    --r-sm: 12px;

    --shadow-1: 0 10px 30px oklch(0% 0 0 / .35);
    --shadow-2: 0 18px 60px oklch(0% 0 0 / .5);
    --glow: 0 0 0 2px color-mix(in oklch, var(--cyan) 55%, transparent), 0 0 30px color-mix(in oklch, var(--cyan) 45%, transparent);

    --maxw: 1440px;
    --pad-x: clamp(24px, 5vw, 56px);
    --gap:  28px;

    /* Type scale */
    --fs-300: 14px;
    --fs-400: 16px;
    --fs-500: 18px;
    --fs-600: clamp(22px, 2.4vw, 28px);
    --fs-700: clamp(32px, 3.6vw, 44px);
    --fs-800: clamp(48px, 6vw, 76px);

    /* Scroll timelines */
    scroll-timeline-name: --page;
    scroll-timeline-axis: block;

    color-scheme: dark;
  }
}

/* =========================================================
   BASE (full-bleed background + structure)
   ========================================================= */
@layer base {
  html, body { height: 100%; }
  body.site {
    min-height: 100vh;
    background:
      linear-gradient(180deg, oklch(14% 0.045 260), oklch(12% 0.04 260)),
      var(--grad-1);
    background-blend-mode: overlay, normal;
    color: var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    line-height: 1.5;
  }

  /* Edge-to-edge sections; container keeps text measure nice on very wide screens */
  .section--edge { position: relative; }
  .container {
    width: min(var(--maxw), 100%);
    margin-inline: auto;
    padding-inline: var(--pad-x);
  }

  /* Global reveal motion fallback */
  .reveal { opacity: 0; transform: translateY(16px); }

  @supports (animation-timeline: scroll()) {
    .reveal {
      animation: reveal-up .9s both;
      animation-timeline: --page;
      animation-range: entry 15% cover 25%;
    }
    @keyframes reveal-up {
      to { opacity: 1; transform: translateY(0); }
    }
  }

  /* Assistive */
  .sr-only {
    position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation: none !important; transition: none !important; }
  }
}

/* =========================================================
   COMPONENTS
   ========================================================= */
@layer components {
  /* ===== NAV: glass + neon underline ===== */
  .nav {
    position: sticky; top: 0; z-index: 50;
    backdrop-filter: blur(14px) saturate(130%);
    background: oklch(from var(--bg-0) l c h / .5);
    box-shadow: var(--shadow-1);
    border-bottom: 1px solid oklch(from var(--cyan) l c h / .35);
  }
  .nav__rail {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: 24px;
    width: min(var(--maxw), 100%);
    margin-inline: auto;
    padding: 16px var(--pad-x);
  }
  .brand {
    font-size: clamp(22px, 2.2vw, 28px);
    font-weight: 700;
    letter-spacing: .3px;
    background: var(--grad-2);
    -webkit-background-clip: text; background-clip: text; color: transparent;
    text-shadow: 0 0 18px oklch(from var(--vio) l c h / .25);
  }
  .brand span { filter: drop-shadow(0 0 10px oklch(from var(--cyan) l c h / .4)); }

  .nav__menu { display: flex; gap: 24px; align-items: center; }
  .nav__menu a {
    position: relative; padding: 8px 10px; font-size: var(--fs-500);
  }
  .nav__menu a::after {
    content: "";
    position: absolute; left: 10px; right: 10px; bottom: 2px; height: 2px;
    background: var(--grad-2);
    transform: scaleX(0); transform-origin: left;
    transition: transform .35s ease;
  }
  .nav__menu a:hover::after, .nav__menu a:focus-visible::after { transform: scaleX(1); }
  .nav__toggle { display: none; } /* desktop */

  /* ===== HERO: full viewport + parallax ribbons + CTAs ===== */
  .hero {
    min-height: 100vh;
    display: grid; align-items: center;
    overflow: clip;
    /* linear sweep background */
    background:
      linear-gradient(180deg, oklch(13% 0.05 260), oklch(10% 0.05 260) 60%, oklch(12% 0.05 260));
    border-bottom: 1px solid oklch(from var(--cyan) l c h / .25);
  }
  .hero__inner { text-align: center; padding-block: clamp(56px, 10vh, 120px); }
  .hero__title {
    font-size: var(--fs-800);
    line-height: 1.05;
    letter-spacing: .4px;
    background: var(--grad-2);
    -webkit-background-clip: text; background-clip: text; color: transparent;
    text-shadow: 0 6px 40px oklch(from var(--vio) l c h / .22);
  }
  .hero__lead {
    max-width: 80ch; margin: 18px auto 28px;
    font-size: var(--fs-600);
    color: oklch(88% 0.02 260);
  }
  .hero__ctas { display: inline-flex; gap: 14px; margin-top: 6px; }

  /* Buttons */
  .btn {
    --btn-pad: 14px 20px;
    display: inline-flex; align-items: center; justify-content: center; gap: 10px;
    padding: var(--btn-pad);
    border-radius: 999px;
    font-weight: 600; letter-spacing: .2px;
    transition: transform .25s ease, box-shadow .25s ease, background .25s ease, border-color .25s ease;
  }
  .btn--primary {
    background: var(--grad-2);
    color: white;
    box-shadow: var(--glow);
    border: 1px solid oklch(from var(--cyan) l c h / .55);
  }
  .btn--primary:hover { transform: translateY(-2px); box-shadow: 0 0 0 2px oklch(from var(--vio) l c h / .55), 0 0 40px oklch(from var(--vio) l c h / .45); }
  .btn--ghost {
    background: oklch(from var(--bg-0) l c h / .35);
    border: 1px solid oklch(from var(--vio) l c h / .5);
    color: var(--ink);
    backdrop-filter: blur(10px);
  }
  .btn--ghost:hover { transform: translateY(-2px); box-shadow: 0 0 0 2px oklch(from var(--vio) l c h / .5), 0 0 30px oklch(from var(--vio) l c h / .35); }
  .btn--neon { background: var(--grad-2); border-radius: 999px; padding: 8px 14px; color: white; border: 1px solid oklch(from var(--cyan) l c h / .55); }

  /* Hero chips */
  .chips { display: flex; gap: 10px; justify-content: center; margin-top: 22px; flex-wrap: wrap; }
  .chip {
    padding: 8px 12px; border-radius: 20px;
    font-size: var(--fs-400);
    color: oklch(92% 0.02 260);
    background: oklch(from var(--bg-1) l c h / .55);
    border: 1px solid oklch(from var(--cyan) l c h / .25);
    backdrop-filter: blur(8px);
  }

  /* Parallax ribbons (linear gradient streaks) */
  .ribbon {
    position: absolute; inset: auto auto 0 auto; pointer-events: none;
    width: 140%; height: 55vh;
    filter: blur(22px) saturate(140%) brightness(1.1);
    opacity: .45;
    background: var(--grad-1);
    transform: translateY(0) rotate(-6deg);
    transform-origin: center;
    mix-blend-mode: screen;
  }
  .ribbon--a { bottom: -10vh; left: -20%; }
  .ribbon--b { bottom: 15vh; right: -25%; transform: translateY(0) rotate(8deg); }
  .ribbon--c { bottom: 40vh; left: -10%; transform: translateY(0) rotate(-2deg); opacity: .35; }

  @supports (animation-timeline: scroll()) {
    .ribbon--a { animation: driftA 1s linear both; animation-timeline: --page; animation-range: 0 45%; }
    .ribbon--b { animation: driftB 1s linear both; animation-timeline: --page; animation-range: 0 55%; }
    .ribbon--c { animation: driftC 1s linear both; animation-timeline: --page; animation-range: 0 65%; }

    @keyframes driftA { to { transform: translateY(-18vh) rotate(-4deg); } }
    @keyframes driftB { to { transform: translateY(-24vh) rotate(10deg); } }
    @keyframes driftC { to { transform: translateY(-30vh) rotate(0deg); } }
  }

  /* ===== SECTION HEADERS ===== */
  .section {
    padding-block: clamp(64px, 14vh, 120px);
    background:
      linear-gradient(180deg, oklch(12% 0.05 260 / 0), oklch(12% 0.05 260 / .35) 50%, oklch(12% 0.05 260 / 0));
  }
  .section__head {
    display: grid; gap: 8px; margin-bottom: 28px;
  }
  .section__title {
    font-size: var(--fs-700);
    line-height: 1.1;
    background: var(--grad-2);
    -webkit-background-clip: text; background-clip: text; color: transparent;
  }
  .section__desc {
    color: oklch(90% 0.02 260);
    font-size: var(--fs-500);
    max-width: 90ch;
  }

  /* ===== GRIDS ===== */
  .grid {
    display: grid; gap: var(--gap);
  }
  .grid--tech {
    grid-template-columns: repeat(6, minmax(0, 1fr));
  }
  .grid--news {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
  .grid--contact {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  /* ===== CARDS ===== */
  .card {
    position: relative;
    padding: 22px;
    border-radius: var(--r-md);
    background: oklch(from var(--bg-0) l c h / .5);
    border: 1px solid oklch(from var(--bg-1) l c h / .6);
    box-shadow: 0 1px 0 oklch(100% 0 0 / .05), var(--shadow-1);
    transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease, background .25s ease, filter .25s ease;
    overflow: clip;
    backdrop-filter: blur(10px);
  }
  .card:hover { transform: translateY(-6px); }

  .card__icon {
    width: 52px; height: 52px; object-fit: contain; margin-bottom: 12px;
    filter: drop-shadow(0 8px 20px oklch(0% 0 0 / .35));
  }
  .card__title {
    font-size: var(--fs-600); line-height: 1.2; margin-bottom: 6px;
  }
  .card__meta {
    font-size: var(--fs-400); color: oklch(88% 0.02 260);
  }

  /* Neon (shadow + border glow) */
  .card--neon {
    border-color: oklch(from var(--cyan) l c h / .45);
    box-shadow: var(--glow);
    background:
      linear-gradient(180deg, oklch(from var(--bg-0) l c h / .6), oklch(from var(--bg-0) l c h / .4));
  }
  .card--neon:hover {
    box-shadow: 0 0 0 2px oklch(from var(--vio) l c h / .6), 0 0 60px oklch(from var(--vio) l c h / .5);
  }

  /* Frosted glass */
  .card--frost {
    background: oklch(from var(--bg-1) l c h / .35);
    border-color: oklch(from var(--vio) l c h / .35);
    backdrop-filter: blur(14px) saturate(140%);
  }
  .card--frost:hover { box-shadow: 0 0 0 2px oklch(from var(--cyan) l c h / .55), 0 0 40px oklch(from var(--cyan) l c h / .4); }

  /* Neon edge (gradient border using masked border trick) */
  .card--neonEdge {
    background: oklch(from var(--bg-0) l c h / .5);
    border: none;
  }
  .card--neonEdge::before {
    content: "";
    position: absolute; inset: 0; border-radius: inherit; padding: 1px;
    background: var(--grad-2);
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
  }
  .card--neonEdge:hover { filter: brightness(1.05); box-shadow: 0 0 40px oklch(from var(--cyan) l c h / .35); }

  /* Pure glass (for contact) */
  .card--glass {
    background: oklch(from var(--bg-1) l c h / .25);
    border: 1px solid oklch(from var(--bg-1) l c h / .6);
  }
  .card--glass:hover {
    box-shadow: 0 0 0 2px oklch(from var(--vio) l c h / .45), 0 0 30px oklch(from var(--vio) l c h / .35);
  }

  /* ===== FOOTER ===== */
  .footer {
    background:
      linear-gradient(180deg, oklch(12% 0.05 260 / 0), oklch(12% 0.05 260 / .4));
    border-top: 1px solid oklch(from var(--cyan) l c h / .25);
    padding-block: 32px;
  }
  .footer__inner {
    display: flex; align-items: center; justify-content: space-between; gap: 20px;
  }
}

/* =========================================================
   UTILITIES
   ========================================================= */
@layer utilities {
  .prose {
    max-width: 80ch;
    color: oklch(92% 0.02 260);
    font-size: var(--fs-500);
  }
}

/* =========================================================
   FLASHY SCROLL-LINKED REVEALS FOR GRIDS (desktop)
   ========================================================= */
@supports (animation-timeline: scroll()) {
  .grid--tech > *,.grid--news > *,.grid--contact > *,.section__head {
    opacity: 0; transform: translateY(18px);
    animation: upfade .6s both;
    animation-timeline: --page;
    animation-range: entry 15% cover 25%;
  }
  .grid--tech > *:nth-child(odd),
  .grid--news > *:nth-child(odd)  { animation-delay: .05s; }
  .grid--tech > *:nth-child(3n),
  .grid--news > *:nth-child(3n)   { animation-delay: .1s; }
  @keyframes upfade { to { opacity: 1; transform: translateY(0); } }
}
