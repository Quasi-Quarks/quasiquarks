<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mobile First – 20% Menu / 80% Body + Mini Editor</title>
  <link rel="stylesheet" href="index5.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body class="state-compact">
  <!-- 3-state toggle: Hidden → 20% → 100% -->
  <button id="menudisplay" aria-label="Toggle menu">☰</button>

  <!-- Left menu (white/yellow) -->
  <nav class="menuBarstdy" aria-label="Study Menu">
    <div class="menuHeader">
      <div class="menuTitle">Study Menu</div>
    </div>

    <div class="menustudycategorycontainer open">
      <button class="menustudycategory" aria-expanded="true">
        <span class="menustudytxtheader">Set up</span>
        <svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
      </button>
      <div class="menustudy" role="region" aria-label="Set up">
        <a class="menustudytxt" href="#">Set up</a>
        <a class="menustudytxt" href="#">Set up on desktop</a>
        <a class="menustudytxt" href="#">Set up on android</a>
        <a class="menustudytxt" href="#">Set up on iphone</a>
      </div>
    </div>

    <div class="menustudycategorycontainer">
      <button class="menustudycategory" aria-expanded="false">
        <span class="menustudytxtheader">What is HTML?</span>
        <svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
      </button>
      <div class="menustudy" role="region" aria-label="What is HTML?">
        <a class="menustudytxt" href="#">Overview</a>
        <a class="menustudytxt" href="#">Elements & Tags</a>
        <a class="menustudytxt" href="#">Attributes</a>
        <a class="menustudytxt" href="#">Semantic HTML</a>
      </div>
    </div>

    <div class="menustudycategorycontainer">
      <button class="menustudycategory" aria-expanded="false">
        <span class="menustudytxtheader">How to learn</span>
        <svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
      </button>
      <div class="menustudy" role="region" aria-label="How to learn">
        <a class="menustudytxt" href="#">Roadmap</a>
        <a class="menustudytxt" href="#">Practice</a>
        <a class="menustudytxt" href="#">Projects</a>
        <a class="menustudytxt" href="#">Resources</a>
      </div>
    </div>
  </nav>

  <!-- Main content (80%) -->
  <main class="mainbody" role="main">
    <div class="body_container_cover">
      <div class="body_container">

        <!-- Your sections -->
        <div class="body_container_cover_section_cover">
          <div class="section_container">
            <h1>We'll get right into it</h1>
            <p>This course gives you enough to start working, freelancing, or building a business. We’ll guide you along the way.</p>
          </div>
        </div>

        <!-- ===== Minimal two-textarea editor block ===== -->
        <div class="body_container_cover_section_cover menu_editor">
          <h2>Mini Editor</h2>

          <div class="editor_controls">
            <button id="btnPlay">▶ Play</button>
            <button id="btnPause">❚❚ Pause</button>
            <button id="btnReset">↺ Reset</button>
          </div>

          <!-- Display labels as you asked: src / play / pause / edit / output -->
          <div style="font-size:.9rem; color:#bbb; margin-bottom:6px;">src · play · pause · edit · output</div>

          <label>Read-only (timeline)</label>
          <textarea id="txtReadonly" readonly>&lt;h1&gt;Hello&lt;/h1&gt;
&lt;p&gt;This is the top (read-only) source. Press Play to use this.&lt;/p&gt;</textarea>

          <label>Editable (your scratch)</label>
          <textarea id="txtEdit" class="editable">&lt;h1&gt;Hello&lt;/h1&gt;
&lt;p&gt;Edit while paused. Preview shows this while paused.&lt;/p&gt;</textarea>

          <div class="editor_output">
            <iframe id="outputFrame" sandbox="allow-scripts"></iframe>
          </div>
        </div>

        <div class="body_container_cover_section_cover">
          <div class="section_container">
            <h1>How to Study</h1>
            <p>Study by phone and laptop/PC. Aim for 4–5 hours a day across setup, learning, practice, fixing bugs, and building small sites.</p>
          </div>
        </div>

      </div>
    </div>
  </main>

  <script>
    /* ===== 3-state menu toggle (Hidden → 20% → 100%) ===== */
    (() => {
      const body = document.body;
      const btn = document.getElementById('menudisplay');
      const states = ['hidden','compact','full'];

      const current = Array.from(body.classList).find(c => c.startsWith('state-')) || 'state-compact';
      let idx = Math.max(0, states.indexOf(current.replace('state-','')));
      if (idx === -1) idx = 1;

      const apply = () => {
        states.forEach(s => body.classList.remove('state-' + s));
        body.classList.add('state-' + states[idx]);
        btn.setAttribute('aria-label', `Menu: ${states[idx]}. Tap to change`);
        btn.title = `Menu: ${states[idx]}`;
      };
      apply();

      btn.addEventListener('click', () => {
        idx = (idx + 1) % states.length;
        apply();
      });

      // Keyboard shortcuts: m to cycle, Esc to hide
      window.addEventListener('keydown', (e) => {
        if (!e.metaKey && !e.ctrlKey && !e.altKey) {
          const k = e.key.toLowerCase();
          if (k === 'm') { idx = (idx + 1) % states.length; apply(); }
          if (k === 'escape') { idx = 0; apply(); }
        }
      });
    })();

    /* ===== Collapsible categories ===== */
    (() => {
      const groups = document.querySelectorAll('.menustudycategorycontainer');
      groups.forEach(group => {
        const headerBtn = group.querySelector('.menustudycategory');
        const panel = group.querySelector('.menustudy');

        const toggle = () => {
          const isOpen = group.classList.toggle('open');
          headerBtn.setAttribute('aria-expanded', String(isOpen));
          if (isOpen) {
            const firstLink = panel.querySelector('a');
            if (firstLink) firstLink.focus({ preventScroll: true });
          }
        };

        headerBtn.addEventListener('click', (e) => {
          e.preventDefault();
          toggle();
        });
        headerBtn.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggle();
          }
        });
      });
    })();

    /* ===== Minimal two-textarea editor logic ===== */
    (() => {
      const txtReadonly = document.getElementById("txtReadonly");
      const txtEdit     = document.getElementById("txtEdit");
      const frame       = document.getElementById("outputFrame");
      const btnPlay     = document.getElementById("btnPlay");
      const btnPause    = document.getElementById("btnPause");
      const btnReset    = document.getElementById("btnReset");

      let playing = false;

      function render(src) {
        frame.srcdoc = src;
      }

      // Play: preview uses readonly and bottom gets overwritten
      btnPlay.addEventListener("click", () => {
        playing = true;
        txtEdit.value = txtReadonly.value; // sync down
        render(txtReadonly.value);
      });

      // Pause: preview uses editable; keep live while typing
      btnPause.addEventListener("click", () => {
        playing = false;
        txtEdit.value = txtReadonly.value; // per your earlier rule: sync on pause too
        render(txtEdit.value);
      });

      // Reset both to a simple template
      btnReset.addEventListener("click", () => {
        const tpl = "<h1>Hello</h1>\n<p>Reset template. Edit while paused.</p>";
        txtReadonly.value = tpl;
        txtEdit.value = tpl;
        render(playing ? txtReadonly.value : txtEdit.value);
      });

      // Live update while paused
      txtEdit.addEventListener("input", () => {
        if (!playing) render(txtEdit.value);
      });

      // Initial render (paused by default)
      render(txtReadonly.value);
    })();
  </script>
</body>
</html>
