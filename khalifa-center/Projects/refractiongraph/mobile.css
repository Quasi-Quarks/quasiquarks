/* ==========================================================================
   mobile.css — Mobile-first styles for “Refraction (Snell’s Law) — Dynamic Graph”
   Optimized for small screens (incl. iPhone SE, 320px). No horizontal scroll.
   ========================================================================== */

/* ---------- Root + reset ---------- */
:root{
  --bg: #0b1220;           /* page background */
  --panel: #101a2e;        /* card background */
  --panel-2: #0b152b;      /* input group background */
  --text: #e6eefc;         /* primary text */
  --muted: #9aa6bf;        /* secondary text */
  --line: rgba(255,255,255,.10);
  --line-2: rgba(255,255,255,.18);
  --focus: 0 0 0 3px rgba(96,165,250,.45);
  --accent: #7dd3fc;       /* curve color hint */
  --marker: #fbbf24;       /* marker dot */
  --danger: #f87171;       /* warnings */
  --ok: #34d399;
  --radius: 14px;
  --radius-sm: 10px;
  --shadow: 0 10px 24px rgba(0,0,0,.35);
}

*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }
html { -webkit-text-size-adjust: 100%; }

body{
  margin: 0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Arial, "Noto Sans";
  font-size: 16px; /* avoid iOS zoom on inputs */
  line-height: 1.4;
  color: var(--text);
  background:
    radial-gradient(1100px 560px at 70% -8%, #1b2a4a 0%, var(--bg) 46%)
    fixed no-repeat;
  background-color: var(--bg);
  overflow-x: hidden; /* absolutely no sideways scroll */
  -webkit-tap-highlight-color: transparent;
}

#app{
  width: 100%;
  max-width: 720px;
  margin: 0 auto 24px;
  padding: 12px;
}

/* Media should never overflow */
img, canvas, svg, video{
  display: block;
  max-width: 100%;
}

/* ---------- Topbar ---------- */
.topbar{
  padding: 6px 2px 12px;
}
.topbar h1{
  margin: 0 0 4px 0;
  font-size: 1.25rem;
  line-height: 1.2;
}
.topbar .sub{
  margin: 0;
  color: var(--muted);
  font-size: .92rem;
}

/* ---------- Cards ---------- */
.card{
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  margin-bottom: 14px;
  overflow: hidden;
}
.card > h2{
  margin: 0;
  font-size: 1.06rem;
  line-height: 1.2;
  padding: 12px 12px;
  border-bottom: 1px solid var(--line);
}

/* ---------- Canvas ---------- */
.canvas-wrap{
  padding: 8px 12px 12px;
}
canvas{
  width: 100%;       /* responsive width */
  height: auto;      /* JS sets intrinsic size; prevents overflow flash */
  background: #071022;
  border: 1px solid var(--line);
  border-radius: var(--radius-sm);
}

/* ---------- Drag modes (segmented control) ---------- */
.drag-modes{
  border: 0;
  margin: 0;
  padding: 8px 12px 12px;
}
.drag-modes > legend{
  padding: 0 0 8px;
  font-weight: 700;
  color: #cfe3ff;
}
.segmented{
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
}
.segmented label{
  position: relative;
  display: block;
}
.segmented input[type="radio"]{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
}
.segmented label > span{
  display: block;
  text-align: center;
  font-weight: 700;
  padding: 10px 12px;
  border-radius: 999px;
  background: var(--panel-2);
  border: 1px solid var(--line);
  user-select: none;
}
.segmented input[type="radio"]:focus-visible + span{
  box-shadow: var(--focus);
}
.segmented input[type="radio"]:checked + span{
  /* background: linear-gradient(180deg, #16284b, #0f1d3a); */
  border-color: rgba(138,182,255,.55);
  outline: 0;
}

/* ---------- Status / notes ---------- */
.status{
  display: grid;
  gap: 6px;
  padding: 6px 12px 12px;
}
.status-item{
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 10px;
  align-items: center;
}
.status .label{ color: var(--muted); }
.status output{
  display: inline-block;
  font-weight: 800;
  color: #dbeafe;
}
.note{
  margin: 2px 12px 10px;
  color: var(--danger);
  min-height: 1.2em;  /* keep layout stable */
}
.helper{
  margin: 0 12px 12px;
  color: var(--muted);
  font-size: .92rem;
}

/* ---------- Controls (sliders + inputs) ---------- */
.controls{
  display: grid;
  gap: 10px;
  padding: 12px;
}

.ctrl{
  display: grid;
  gap: 8px;
  padding: 10px;
  background: var(--panel-2);
  border: 1px solid var(--line);
  border-radius: var(--radius-sm);
}

.ctrl-head{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
}
.ctrl-head > span{
  color: var(--muted);
  font-size: .92rem;
}
.ctrl-head output{
  color: #dbeafe;
  font-weight: 800;
}

/* Range input — touch friendly */
input[type="range"]{
  width: 100%;
  appearance: none;
  height: 38px;          /* big touch target */
  background: transparent;
  margin: 2px 0 4px 0;
}

/* WebKit track & thumb */
input[type="range"]::-webkit-slider-runnable-track{
  height: 8px;
  background: linear-gradient(90deg, rgba(255,255,255,.12), rgba(255,255,255,.16));
  border: 1px solid var(--line-2);
  border-radius: 999px;
}
input[type="range"]::-webkit-slider-thumb{
  appearance: none;
  margin-top: -10px;     /* center on track (thumb height/2 - track/2) */
  height: 28px;
  width: 28px;
  border-radius: 50%;
  background: #12233f;
  border: 2px solid #8ab6ff;
  box-shadow: 0 1px 2px rgba(0,0,0,.4);
}

/* Firefox track & thumb */
input[type="range"]::-moz-range-track{
  height: 8px;
  background: linear-gradient(90deg, rgba(255,255,255,.12), rgba(255,255,255,.16));
  border: 1px solid var(--line-2);
  border-radius: 999px;
}
input[type="range"]::-moz-range-thumb{
  height: 28px;
  width: 28px;
  border-radius: 50%;
  background: #12233f;
  border: 2px solid #8ab6ff;
}

/* Number inputs + unit */
.pair{
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 8px;
}
.pair input[type="number"]{
  appearance: textfield;
  -moz-appearance: textfield;
  width: 100%;
  min-width: 0;
  border: 0;
  outline: none;
  /* background: #0c1a33; */
  color: var(--text);
  font-size: 16px; /* avoid iOS zoom */
  padding: 10px 10px;
  border-radius: 10px;
  border: 1px solid var(--line);
}
.pair input[type="number"]:focus{
  box-shadow: var(--focus);
}
.pair small{
  color: var(--muted);
  font-weight: 700;
  padding-right: 2px;
}

/* ---------- Buttons ---------- */
.btns{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  padding: 0 12px 12px;
}
button{
  appearance: none;
  border: 0;
  border-radius: 12px;
  padding: 12px 14px;
  font-weight: 800;
  cursor: pointer;
}
button.primary{
  background: linear-gradient(180deg, #1f5fff, #1647c9);
  color: white;
  box-shadow: 0 8px 18px rgba(31,95,255,.2);
}
button.primary:active{ transform: translateY(1px); }
button.primary:focus-visible{ box-shadow: var(--focus); }

button.ghost{
  background: transparent;
  color: #cbd5e1;
  border: 1px dashed var(--line-2);
}
button.ghost:active{ transform: translateY(1px); }
button.ghost:focus-visible{ box-shadow: var(--focus); }

/* ---------- Explanation ---------- */
.explain{
  padding: 10px 12px 14px;
  color: var(--text);
}
.explain p{ margin: 0 0 8px 0; }
.explain ul{
  margin: 0 0 8px 18px;
  padding: 0;
}
.explain code{
  /* background: #0c1a33; */
  border: 1px solid var(--line);
  padding: 2px 6px;
  border-radius: 8px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: .9em;
}

/* ---------- Accessibility focus styles ---------- */
:focus-visible{
  outline: none;
  box-shadow: var(--focus);
}

/* ---------- Overflow protection ---------- */
section, .controls, .canvas-wrap, .drag-modes { overflow: clip; }

/* ---------- Progressive enhancements ---------- */
@media (min-width: 360px){
  .controls{ gap: 12px; }
  .segmented{ grid-template-columns: 1fr 1fr 1fr; }
}

@media (min-width: 480px){
  .controls{
    grid-template-columns: 1fr 1fr;
  }
}

@media (min-width: 820px){
  .controls{
    grid-template-columns: 1fr 1fr 1fr;
  }
}

/* ---------- Reduced motion ---------- */
@media (prefers-reduced-motion: reduce){
  *{ transition: none !important; animation: none !important; }
}

/* ---------- Optional light theme ---------- */
@media (prefers-color-scheme: light){
  :root{
    --bg: #f6f8fc;
    --panel: #ffffff;
    --panel-2: #f4f6fb;
    --text: #10243a;
    --muted: #5b6b83;
    --line: rgba(16,36,58,.12);
    --line-2: rgba(16,36,58,.20);
    --focus: 0 0 0 3px rgba(96,165,250,.35);
  }
  body{
    background:
      radial-gradient(1100px 560px at 70% -8%, #e8f0ff 0%, #f6f8fc 46%)
      fixed no-repeat;
    background-color: #f6f8fc;
  }
  canvas{ background: #f9fbff; }
  button.ghost{ color: #13304b; }
}
